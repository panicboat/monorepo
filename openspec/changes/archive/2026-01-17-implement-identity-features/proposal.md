# Proposal: Implement Identity Features

## Summary
リフレッシュトークン、ログアウト機能の実装、およびゲストログインパスの変更を行います。

## Motivation
現在の認証システムにはトークンの有効期限切れ後の更新メカニズムと、安全なログアウト手段が不足しています。また、ゲストユーザーのログイン画面をルートパスから分離し、より明確なルーティング構造にする必要があります。

## Solution
1. **Refresh Token**: アクセストークンと対になるリフレッシュトークンを導入し、セッション維持を可能にします。
2. **Logout**: リフレッシュトークンを無効化するAPIを追加し、クライアント側でのトークン破棄と連携させます。
3. **Guest Login Path**: ゲストのログイン画面を `/` から `/login` に移動し、非認証ユーザーのルートアクセス時は `/login` へリダイレクトさせます。

## Risks
- **Breaking Change**: ゲストユーザーのログインURLが変更されます。ブックマーク等への影響がありますが、リダイレクトで緩和します。
- **Migration**: 既存のトークン（もしあれば）の扱いに注意が必要ですが、現状は開発段階とみなせるため、再ログインを促す形で対応します。

## Alternatives
- **No Refresh Token**: 有効期限を長くする案もありますが、セキュリティリスクが高まるため採用しません。
- **Login Modal**: `/` でモーダル表示する案もありますが、URLを分けることでDeeplink対応等が容易になるため `/login` ページを採用します。
