version: v2

# Managed mode configuration
managed:
  enabled: true
  override:
    go_package_prefix:
      default: github.com/panicboat/monorepo/demo
      except:
        - buf.build/googleapis/googleapis

# Code generation plugins
plugins:
  # Go language plugin
  - remote: buf.build/protocolbuffers/go:v1.31.0
    out: gen/go
    opt:
      - paths=source_relative

  # gRPC Go plugin
  - remote: buf.build/grpc/go:v1.3.0
    out: gen/go
    opt:
      - paths=source_relative
      - require_unimplemented_servers=false

  # gRPC Gateway plugin
  - remote: buf.build/grpc-ecosystem/gateway:v2.18.0
    out: gen/go
    opt:
      - paths=source_relative
      - generate_unbound_methods=true

# Input configuration
inputs:
  - directory: proto