name: Example Notification Usage

on:
  pull_request:
    types: [opened, synchronize, reopened]
  issues:
    types: [opened, reopened]
  workflow_dispatch:

jobs:
  # ã‚µãƒ³ãƒ—ãƒ«: CI ã‚¸ãƒ§ãƒ–
  build:
    runs-on: ubuntu-latest
    outputs:
      build_status: ${{ steps.build_result.outputs.status }}
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Simulate build process
        id: build_result
        run: |
          # ã“ã“ã§å®Ÿéš›ã®ãƒ“ãƒ«ãƒ‰å‡¦ç†ã‚’è¡Œã†
          echo "Building project..."
          sleep 2

          # ãƒ©ãƒ³ãƒ€ãƒ ã«æˆåŠŸ/å¤±æ•—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼ˆå®Ÿéš›ã®ä½¿ç”¨ã§ã¯å‰Šé™¤ï¼‰
          if [ $((RANDOM % 2)) -eq 0 ]; then
            echo "Build successful!"
            echo "status=success" >> $GITHUB_OUTPUT
          else
            echo "Build failed!"
            echo "status=failure" >> $GITHUB_OUTPUT
            exit 1
          fi

  # æˆåŠŸæ™‚ã®é€šçŸ¥
  notify_success:
    needs: build
    if: success()
    uses: ./.github/workflows/reusable-notification.yaml
    with:
      notification_type: "success"
      title: "Build Successful"
      message: |
        ğŸ‰ ãƒ“ãƒ«ãƒ‰ãŒæ­£å¸¸ã«å®Œäº†ã—ã¾ã—ãŸï¼

        **å¤‰æ›´å†…å®¹:**
        - ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã—ã¾ã—ãŸ
        - ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒç¶­æŒã•ã‚Œã¦ã„ã¾ã™
        - ãƒ“ãƒ«ãƒ‰ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆãŒæ­£å¸¸ã«ç”Ÿæˆã•ã‚Œã¾ã—ãŸ
      comment_id_prefix: "build-status"

  # å¤±æ•—æ™‚ã®é€šçŸ¥
  notify_failure:
    needs: build
    if: failure()
    uses: ./.github/workflows/reusable-notification.yaml
    with:
      notification_type: "failure"
      title: "Build Failed"
      message: |
        ğŸ’¥ ãƒ“ãƒ«ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸã€‚

        **è€ƒãˆã‚‰ã‚Œã‚‹åŸå› :**
        - ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼
        - ãƒ†ã‚¹ãƒˆã®å¤±æ•—
        - ä¾å­˜é–¢ä¿‚ã®å•é¡Œ

        è©³ç´°ã¯[ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å®Ÿè¡Œãƒ­ã‚°](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})ã‚’ã”ç¢ºèªãã ã•ã„ã€‚
      comment_id_prefix: "build-status"

  # æƒ…å ±æä¾›ã®é€šçŸ¥ä¾‹
  notify_info:
    if: github.event_name == 'pull_request' && github.event.action == 'opened'
    uses: ./.github/workflows/reusable-notification.yaml
    with:
      notification_type: "info"
      title: "Pull Request Review Guidelines"
      message: |
        ğŸ“‹ **ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®ãŠé¡˜ã„**

        ã“ã®PRã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹éš›ã¯ã€ä»¥ä¸‹ã®ç‚¹ã‚’ã”ç¢ºèªãã ã•ã„ï¼š
        - [ ] ã‚³ãƒ¼ãƒ‰ã‚¹ã‚¿ã‚¤ãƒ«ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ¨™æº–ã«æº–æ‹ ã—ã¦ã„ã‚‹
        - [ ] ãƒ†ã‚¹ãƒˆãŒé©åˆ‡ã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹
        - [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ›´æ–°ã•ã‚Œã¦ã„ã‚‹ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
        - [ ] ç ´å£Šçš„å¤‰æ›´ãŒã‚ã‚‹å ´åˆã¯é©åˆ‡ã«æ–‡æ›¸åŒ–ã•ã‚Œã¦ã„ã‚‹

        ã”å”åŠ›ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ï¼ ğŸ™
      comment_id_prefix: "pr-guidelines"
      show_workflow_details: false
